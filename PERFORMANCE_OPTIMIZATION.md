# Оптимизация производительности VODeco

## Проблемы, которые были решены:

### 1. Проблемы с загрузкой первой страницы
- **Причина**: Множественные анимации Canvas и CSS запускались одновременно
- **Решение**: Добавлена ленивая загрузка анимаций с задержкой в 1 секунду

### 2. Проблемы с бургер меню
- **Причина**: Конфликты z-index между анимированным фоном и мобильным меню
- **Решение**: Увеличен z-index для мобильного хедера (z-[60]) и меню (z-[70])

### 3. Торможение приложения
- **Причина**: Сложные Canvas анимации работали на всех устройствах
- **Решение**: Интеллектуальное определение производительности устройства

## Внесенные оптимизации:

### 1. Интеллектуальное управление анимациями
- Создан хук `usePerformance` для определения возможностей устройства
- Автоматическое отключение анимаций на слабых устройствах
- Учет настроек пользователя `prefers-reduced-motion`

### 2. Оптимизация Canvas анимаций
- Ограничение FPS до 30 кадров в секунду
- Рендеринг только видимых элементов
- Увеличение размера гексагонов для уменьшения их количества
- Дебаунс для обработчика изменения размера окна

### 3. Статический фон для слабых устройств
- Создан компонент `StaticBackground` для устройств с низкой производительностью
- Сохранен визуальный стиль без анимаций

### 4. Оптимизация CSS анимаций
- Увеличен период анимации градиента с 20 до 30 секунд
- Добавлена поддержка `prefers-reduced-motion`

### 5. Оптимизация Framer Motion
- Использование `useReducedMotion` для отключения анимаций
- Упрощение анимаций на слабых устройствах

## Критерии определения слабых устройств:

1. **Количество ядер процессора** ≤ 2
2. **Объем памяти** ≤ 2GB
3. **Размер экрана** < 1,000,000 пикселей
4. **Отсутствие WebGL** поддержки

## Результаты оптимизации:

- ✅ Быстрая загрузка первой страницы
- ✅ Работающее бургер меню на всех устройствах
- ✅ Плавная работа на слабых устройствах
- ✅ Сохранение визуального эффекта на мощных устройствах
- ✅ Автоматическая адаптация к настройкам пользователя

## Дополнительные рекомендации:

1. **Мониторинг производительности**: Используйте DevTools для отслеживания FPS
2. **Тестирование на слабых устройствах**: Проверяйте на старых смартфонах
3. **Настройки пользователя**: Всегда учитывайте `prefers-reduced-motion`
4. **Ленивая загрузка**: Загружайте тяжелые компоненты только при необходимости

## Файлы, которые были изменены:

- `client/src/components/layout/BackgroundProvider.tsx` - Основной провайдер фона
- `client/src/components/layout/HexOceanWaves.tsx` - Анимированные волны
- `client/src/components/layout/AnimatedHexGrid.tsx` - Анимированная сетка
- `client/src/components/layout/MobileHeader.tsx` - Мобильный хедер
- `client/src/pages/LandingPage.tsx` - Главная страница
- `client/src/index.css` - CSS анимации
- `client/src/hooks/use-performance.ts` - Хук для производительности (новый)
- `client/src/components/layout/StaticBackground.tsx` - Статический фон (новый)
